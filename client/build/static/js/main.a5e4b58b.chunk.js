(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{144:function(e,t,a){e.exports=a.p+"static/media/book.b8b7c4ab.svg"},145:function(e,t,a){e.exports=a.p+"static/media/library.22c2b61a.svg"},147:function(e,t,a){e.exports=a.p+"static/media/header.b47b8241.svg"},158:function(e,t,a){e.exports=a(223)},219:function(e,t,a){},221:function(e,t,a){},222:function(e,t,a){},223:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(46),c=a.n(r),i=(a(163),a(17)),l=a(72),s=a(10),u=a(236),m=a(240),d=a(243),f=a(150),b=a(149),v=a(19),E=Object(n.createContext)(),h=E.Provider,p=function(e,t){switch(t.type){case"SAVE_SEARCH":return Object(v.a)(Object(v.a)({},e),{},{books:t.books,loading:!1});case"CLEAR_SEARCH":return Object(v.a)(Object(v.a)({},e),{},{books:[],loading:!1});case"UPDATE_FAVORITES":return Object(v.a)(Object(v.a)({},e),{},{favorites:t.favorites,loading:!1});case"ADD_FAVORITE":return Object(v.a)(Object(v.a)({},e),{},{favorite:[t.favorite].concat(Object(b.a)(e.favorites)),loading:!1});case"REMOVE_FAVORITE":return Object(v.a)(Object(v.a)({},e),{},{favorites:e.favorites.filter((function(e){return e._id!==t.id})),loading:!1});case"LOADING":return Object(v.a)(Object(v.a)({},e),{},{loading:!0});default:return e}},g=function(e){e.value;var t=Object(f.a)(e,["value"]),a=Object(n.useReducer)(p,{search:"",favorite:"",books:[],favorites:[],loading:!1}),r=Object(i.a)(a,2),c=r[0],l=r[1];return o.a.createElement(h,Object.assign({value:[c,l]},t))},k=function(){return Object(n.useContext)(E)},O=a(65),j=a.n(O),I=a(142),A=a.n(I)()(),y=function(e){return j.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(e,"&maxResults=20"))},S=function(){return j.a.get("/api/books")},R=function(e){return j.a.delete("/api/books/"+e)},V=function(e){return j.a.post("/api/books",e)},C=function(e,t){A.on("update",(function(e){return t(e)})),e&&A.emit("favoriteUpdate",e)},D=a(224),N=a(73),_=a(49),x=function(e){var t=k(),a=Object(i.a)(t,2),n=a[0],r=(a[1],e.title),c=e.authors,l=e.description,s=e.src,u=e.link,d=e.handleSave,f=e.bookId,b=e.deleteBtn,v=e.handleDelete;return o.a.createElement(m.a,null,o.a.createElement(m.a.Image,{size:"tiny",src:s,as:"a",href:u,target:"_blank"}),o.a.createElement(m.a.Content,{verticalAlign:"middle"},o.a.createElement("div",null,o.a.createElement(m.a.Header,{className:"item-header",style:{fontSize:"1.3rem",fontWeight:700,color:"black"}},r,o.a.createElement(D.a,{as:"div",labelPosition:"left",floated:"right"},o.a.createElement(N.a,{basic:!0,as:"a",href:u,target:"blank"},"View"),b?o.a.createElement(D.a,{loading:n.loading,icon:!0,onClick:function(){return v(f)},className:"negative ui button"},o.a.createElement(_.a,{name:"delete"}),"Delete"):o.a.createElement(D.a,{loading:n.loading,icon:!0,onClick:function(){return d(f)},className:"positive ui button"},"Save ",o.a.createElement(_.a,{name:"heart"}))))),o.a.createElement(m.a.Meta,null,"Written by ",c),o.a.createElement(m.a.Description,null,l)))};a(219);var w=function(){var e=k(),t=Object(i.a)(e,2),a=t[0],r=t[1];function c(e){r({type:"LOADING"}),R(e).then((function(t){r({type:"REMOVE_FAVORITE",id:e})})).catch((function(e){return console.log(e)}))}return Object(n.useEffect)((function(){S().then((function(e){return r({type:"UPDATE_FAVORITES",favorites:e.data}),e})).catch((function(e){return console.log(e)}))}),[]),o.a.createElement(u.a,null,a.favorites.length?o.a.createElement(m.a.Group,{divided:!0},a.favorites.map((function(e){return o.a.createElement(x,{key:e._id,deleteBtn:!0,title:e.title,authors:e.authors,description:e.description,src:e.image,link:e.link,handleDelete:c,bookId:e._id})}))):o.a.createElement(d.a,{as:"h3",color:"grey",className:"no-saved"},"Click 'Search For Books' to find books to save to your collection."))},T=a(237),L=a(144),F=a.n(L),G=a(145),P=a.n(G);var B=function(){var e=k(),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),l=Object(i.a)(c,2),s=l[0],d=l[1];function f(e){r({type:"LOADING"});var t=a.books.filter((function(t){return t.id===e}))[0];C(t,(function(e){return console.log("received saved update: ",e)})),V(t).then((function(e){return r({type:"ADD_FAVORITE",favorite:e})})).catch((function(e){return console.log(e)}))}return o.a.createElement(u.a,null,o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s&&(r({type:"LOADING"}),y(s).then((function(e){r({type:"SAVE_SEARCH",books:e.data.items.map((function(e){return{id:e.id,title:e.volumeInfo.title,authors:e.volumeInfo.authors?e.volumeInfo.authors.join(", "):"...",description:e.volumeInfo.description,image:e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:F.a,link:e.volumeInfo.previewLink.split("&")[0]}}))}),d("")})).catch((function(e){return console.log(e)})))}},o.a.createElement(T.a,{action:"Search",loading:a.loading,className:"search",onChange:function(e){d(e.target.value)},name:"title",icon:"search",iconPosition:"left",placeholder:"Search for a book, e.g. 'Pride and Prejudice'",value:s,style:{width:"100%",marginTop:"10px"}})),a.books.length?o.a.createElement(m.a.Group,{divided:!0},a.books.map((function(e){return o.a.createElement(x,{key:e.id,title:e.title,authors:e.authors,description:e.description,src:e.image,link:e.link,handleSave:f,bookId:e.id})}))):o.a.createElement("img",{src:P.a,alt:"library",className:"ui fluid image"}))};var H=function(){return o.a.createElement(u.a,null,o.a.createElement("h1",null,"404 Page Not Found"))},U=a(238);var M=function(e){var t=k(),a=Object(i.a)(t,2),n=a[0],r=a[1];return o.a.createElement(u.a,null,o.a.createElement(U.a,{tabular:!0},o.a.createElement(U.a.Item,{as:l.b,to:"/search",name:"Search for books",active:"search"===e.location}),o.a.createElement(U.a.Item,{as:l.b,to:"/saved",name:"View saved books",active:"saved"===e.location}),n.books.length>0&&o.a.createElement(U.a.Item,{position:"right"},o.a.createElement(D.a,{basic:!0,icon:!0,onClick:function(){r({type:"CLEAR_SEARCH"})}},"Clear search"))))},z=(a(221),a(147)),J=a.n(z),W=function(){return o.a.createElement(d.a,{as:"h1",icon:!0,textAlign:"center",className:"page-header"},o.a.createElement("div",null,o.a.createElement("img",{src:J.a,height:250,alt:"header"})),"Google Books Search",o.a.createElement(d.a.Subheader,null,"Search for books and save them to your collection"))},q=(a(222),a(239)),K=a(241),Q=function(e){var t=e.savedUpdate,a=t.isVisible,n=t.favorite;return o.a.createElement(q.a.Group,{animation:"fade",duration:100},a&&o.a.createElement("div",{className:"message-container"},o.a.createElement(K.a,{className:"update-message",positive:!0,icon:"heart",header:"Book saved:",content:"".concat(n.title," by ").concat(n.authors)})))};var X=function(){var e=Object(n.useState)({favorite:"",isVisible:!1}),t=Object(i.a)(e,2),a=t[0],r=t[1];return C(null,(function(e){r({favorite:e,isVisible:!0}),setTimeout((function(){return r({favorite:"",isVisible:!1})}),4e3)})),o.a.createElement(l.a,null,o.a.createElement("div",null,o.a.createElement(Q,{savedUpdate:a}),o.a.createElement(g,null,o.a.createElement(W,null),o.a.createElement(M,null),o.a.createElement(s.c,null,o.a.createElement(s.a,{exact:!0,path:"/",component:B}),o.a.createElement(s.a,{exact:!0,path:"/search",component:B}),o.a.createElement(s.a,{exact:!0,path:"/saved",component:w}),o.a.createElement(s.a,{component:H})))))};c.a.render(o.a.createElement(X,null),document.getElementById("root"))}},[[158,1,2]]]);
//# sourceMappingURL=main.a5e4b58b.chunk.js.map